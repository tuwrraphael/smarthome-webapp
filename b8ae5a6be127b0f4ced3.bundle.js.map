{"version":3,"sources":["webpack://smarthome/./src/components/LoginComponent/LoginComponent.ts","webpack://smarthome/./src/components/LoginComponent/LoginComponent.html"],"names":["LoginComponent","HTMLElement","super","this","innerHTML","nonceInput","querySelector","redirectUriInput","value","window","location","href","replace","loginHintInput","loginForm","length","text","possible","i","charAt","Math","floor","random","nonce","navigator","credentials","get","federated","providers","mediation","then","c","type","id","submit","customElements","define","module","exports"],"mappings":"2LAYM,MAAOA,UAAuBC,YAMhC,cACIC,QACAC,KAAKC,UAAY,IAGrB,oBACID,KAAKE,WAAaF,KAAKG,cAAc,UACrCH,KAAKI,iBAAmBJ,KAAKG,cAAc,iBAC3CH,KAAKI,iBAAiBC,MAAQC,OAAOC,SAASC,KAAKC,QAAQ,yBAA0B,IAAIA,QAAQ,SAAU,IAC3GT,KAAKU,eAAiBV,KAAKG,cAAc,eACzCH,KAAKW,UAAYX,KAAKG,cAAc,eACpCH,KAAKE,WAAWG,MA1BxB,SAAeO,GAGX,IAFA,IAAIC,EAAO,GACPC,EAAW,iEACNC,EAAI,EAAGA,EAuBkB,EAvBNA,IACxBF,GAAQC,EAASE,OAAOC,KAAKC,MAAMD,KAAKE,SAAWL,EAASF,SAEhE,OAAOC,EAoBqBO,GACpB,wBAAyBd,QACzBe,UAAUC,YAAYC,IAAI,CACtBC,UAAW,CACPC,UAAW,CACP,gCAGRC,UAAW,aACZC,MAAKC,IACAA,GAAe,aAAVA,EAAEC,OACP7B,KAAKU,eAAeL,MAAQuB,EAAEE,GAC9B9B,KAAKW,UAAUoB,aAM/B,yBAKJC,eAAeC,OAAO,kBAAmBpC,I,iBCjDzCqC,EAAOC,QAFI","file":"b8ae5a6be127b0f4ced3.bundle.js","sourcesContent":["import template from \"./LoginComponent.html\";\nimport \"./LoginComponent.scss\";\n\nfunction nonce(length: number) {\n    var text = \"\";\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    for (var i = 0; i < length; i++) {\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n    return text;\n}\n\nexport class LoginComponent extends HTMLElement {\n    private nonceInput: HTMLInputElement;\n    private redirectUriInput: HTMLInputElement;\n    private loginHintInput: HTMLInputElement;\n    private loginForm: HTMLFormElement;\n\n    constructor() {\n        super();\n        this.innerHTML = template;\n    }\n\n    connectedCallback() {\n        this.nonceInput = this.querySelector(\"#nonce\");\n        this.redirectUriInput = this.querySelector(\"#redirect_uri\");\n        this.redirectUriInput.value = window.location.href.replace(/\\/login|(\\?.+)|(\\#.+)/g, \"\").replace(/(\\/$)/g, \"\");\n        this.loginHintInput = this.querySelector(\"#login_hint\");\n        this.loginForm = this.querySelector(\"#login_form\");\n        this.nonceInput.value = nonce(8);\n        if (\"FederatedCredential\" in window) {\n            navigator.credentials.get({\n                federated: {\n                    providers: [\n                        \"https://accounts.google.com\"\n                    ]\n                },\n                mediation: \"optional\"\n            }).then(c => {\n                if (c && c.type == \"federated\") {\n                    this.loginHintInput.value = c.id;\n                    this.loginForm.submit();\n                }\n            });\n        }\n    }\n\n    disconnectedCallback() {\n\n    }\n}\n\ncustomElements.define(\"login-component\", LoginComponent);\n","// Module\nvar code = \"<div class=\\\"login-container\\\"> <form method=\\\"GET\\\" action=\\\"https://accounts.google.com/o/oauth2/v2/auth\\\" id=\\\"login_form\\\"> <input type=\\\"hidden\\\" name=\\\"client_id\\\" id=\\\"client_id\\\" value=\\\"183140089369-730bg2gdo8g0r5useg6q0s5cf0i6l4as.apps.googleusercontent.com\\\"> <input type=\\\"hidden\\\" name=\\\"redirect_uri\\\" id=\\\"redirect_uri\\\"> <input type=\\\"hidden\\\" name=\\\"response_type\\\" value=\\\"token id_token\\\"> <input type=\\\"hidden\\\" name=\\\"login_hint\\\" id=\\\"login_hint\\\"> <input type=\\\"hidden\\\" name=\\\"nonce\\\" id=\\\"nonce\\\"> <input type=\\\"hidden\\\" name=\\\"scope\\\" value=\\\"openid\\\"> <button type=\\\"submit\\\">Login with Google</button> </form> </div>\";\n// Exports\nmodule.exports = code;"],"sourceRoot":""}